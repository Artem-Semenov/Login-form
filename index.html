<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="/Login-form/index.css" />
		<title>Document</title>
	</head>
	<body>
		<div class="wrapper">
			<div class="form-wrapper">
				<p>Вхід в акаунт</p>
				<form action="#" id="main" name="main">
					<div class="login-wrapper">
						<input
							tabindex="1"
							type="text"
							value=""
							name="login"
							id="login"
							placeholder="Логін"
							class="focus-border"
						/>
					</div>
					<div class="password-wrapper">
						<input
							tabindex="2"
							type="password"
							value=""
							name="password"
							id="password"
							placeholder="Пароль"
						/>
						<a href="#" class="passwordIcon" id="passwordIcon"></a>
					</div>
					<div class="button-wrapper">
						<button
							tabindex="3"
							type="submit"
							id="submitButton"
							disabled="true"
							class="submit-button button-hover"
						>
							Вхід
						</button>
					</div>
				</form>
				<div class="forget-password-wrapper">
					<a target="_blank" href="https://google.com">Забули пароль?</a>
				</div>
			</div>
		</div>
		<div class="form-wrapper successfullLogin-wrapper" id="overAll-wrapper">
			<p>Вхід в акаунт</p>
			<img src="/Login-form//source/img/flat-color-icons_ok.png" alt="icon" />
			<p class="successful-data-inputed">Данні успішно введені!</p>
			<div class="button-wrapper">
				<a
					target="_blank"
					href="https://google.com"
					class="successfullLogin-button"
					>Перейти до сайту</a
				>
			</div>
		</div>
		<script>
			const mainForm = document.forms.main;
			const loginInput = mainForm.login;
			const passwordInput = mainForm.password;
			const loginPlaceholder = mainForm.login.placeholder;
			const passwordPlaceholder = mainForm.password.placeholder;
			const successfullLogin = document.getElementById("overAll-wrapper");
			const submitButton = document.getElementById("submitButton");
			const passwordShow = document.getElementById("passwordIcon");

			class myObject extends Object {
				constructor(username, password) {
					super();
					this.login = username;
					this.password = password;
				}
				isFullyMatch(login, password) {
					if (login === this.login && password === this.password) {
						return true;
					}
					{
						return false;
					}
				}
				isLoginMatch(login) {
					if (login === this.login) {
						return true;
					}
					{
						return false;
					}
				}
			}

			class myArray extends Array {
				usersAnalyze() {
					for (const el of this) {
						if (
							el.isFullyMatch(loginInput.value, passwordInput.value) === true
						) {
							successfullLogin.classList.add(
								"successfullLogin-wrapper-display"
							);
							mainForm.parentElement.classList.add("form-wrapper-display-none");
							return;
						} else if (el.isLoginMatch(loginInput.value) === true) {
							passwordInput.classList.add("input_error");
							if (!passwordShow.nextElementSibling) {
								passwordInput.parentElement.insertAdjacentHTML(
									"beforeend",
									`<div class="password-eror">
                     <p>Невірний пароль</p>
                  </div>`
								);
							}
							if (loginInput.nextElementSibling) {
								loginInput.nextElementSibling.remove();
							}
							return;
						} else {
							if (!loginInput.nextElementSibling) {
								loginInput.parentElement.insertAdjacentHTML(
									"beforeend",
									`<div class="login-error-missing">
							<p>Такого лоігну не існує</p>
						</div>`
								);
							}
						}
					}
				}
			}

			const users = new myArray();
			users.push(
				new myObject("admin@gmail.com", "correctPassword"),
				new myObject("correctLogin@gmail.com", "admin"),
				new myObject("artem@gmail.com", "admin"),
				new myObject("nikita@gmail.com", "admin")
			);

			mainForm.addEventListener("input", function (event) {
				if (loginInput.value || passwordInput.value) {
					submitButton.classList.remove("button-hover");
					submitButton.disabled = false;
				} else {
					submitButton.classList.add("button-hover");
					submitButton.disabled = true;
				}
			});

			loginInput.addEventListener("focus", function (f) {
				loginInput.placeholder = "";
				loginInput.classList.add("input-focus-border")
				if (loginInput.nextElementSibling) {
					loginInput.nextElementSibling.remove();
				}
				loginInput.classList.remove("input_error");
			});

			loginInput.addEventListener("blur", function (f) {
				loginInput.classList.remove("input-focus-border")
				loginInput.placeholder = loginPlaceholder;
			});

			passwordInput.addEventListener("focus", function (f) {
				passwordInput.placeholder = "";
				passwordInput.classList.add("input-focus-border")
				if (passwordShow.nextElementSibling) {
					passwordShow.nextElementSibling.remove();
				}
				passwordInput.classList.remove("input_error");
			});

			passwordInput.addEventListener("blur", function (f) {
				passwordInput.placeholder = passwordPlaceholder;
				passwordInput.classList.remove("input-focus-border")
			});

			passwordShow.addEventListener("click", function (event) {
				event.preventDefault();
				if (passwordInput.type === "password") {
					passwordInput.type = "text";
					passwordShow.classList.add("passwordIconActive");
				} else {
					passwordInput.type = "password";
					passwordShow.classList.remove("passwordIconActive");
				}
			});

			function emailTest(input) {
				const testEmail =
					/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
				return testEmail.test(input.value);
			}

			mainForm.addEventListener("submit", function (event) {
				event.preventDefault();
				if (!loginInput.value) {
					loginInput.classList.add("input_error");
					loginInput.parentElement.insertAdjacentHTML(
						"beforeend",
						`<div class ="input-error-missing-value">
                     <p>Заповніть поле!</p>
                  </div>`
					);
				} 
				else if (!passwordInput.value) {
					passwordInput.classList.add("input_error");
					passwordInput.parentElement.insertAdjacentHTML(
						"beforeend",
						`<div class ="input-error-missing-value">
                     <p>Заповніть поле!</p>
                  </div>`
					);
				} else if (!emailTest(loginInput)) {
					loginInput.classList.add("input_error")
					if (!loginInput.nextElementSibling) {
						loginInput.parentElement.insertAdjacentHTML(
							"beforeend",
							`<div class="login-error-invalid">
                     <p>Використовуйте лише латинські літери, цифри та символи @, $, _.</p>
                  </div>`
						);
					}
				} else {
					users.usersAnalyze();
				}
			});
		</script>
	</body>
</html>
